<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Tridy</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Tridy</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>
            <span class="ancestors"><a href="module-Interpreter.html">Interpreter</a>.</span>Tridy<span class="signature">()</span><span class="type-signature"></span></h2>
        
            <div class="class-description">Database class for interpreting Tridy commands/statements.

A Tridy database includes three parts: a tokenizer, parser, and composer.
Each may be stateful to varying degrees.

Interacting with this class is all done through the query() method, which automatically pipes the input through these separate components in order.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Tridy"><span class="type-signature"></span>new Tridy<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Constructor for the Tridy class.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>opts.type_key</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The key used to classify modules when printing compressed output using @merged or @final. Default is 'type'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.tags_key</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The key under which tags are imported and exported as. Has no effect if client_mode is enabled. Default is 'tags'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.free_key</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The key under which the free data structure is imported and exported as. Has no effect if client_mode is enabled. Default is 'free'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.tree_key</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The key under which the tree data structure is imported and exported as. Has no effect if client_mode is enabled. Default is 'tree'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.root_key</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The name given to the XML list tag. If used with @xml input, a root tag named this is also replaced with its contents. Relevant only when the output format is 'xml'. Default is 'root'.</td>
        </tr>

    
    </tbody>
</table>






    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>_lexer</code></td>
            

            <td class="type">
            
                
<span class="param-type">StatementParser</span>


            
            </td>

            

            

            <td class="description last">Extracts tokens from the input string, and manages statement-queuing.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>_parser</code></td>
            

            <td class="type">
            
                
<span class="param-type">SyntaxParser</span>


            
            </td>

            

            

            <td class="description last">Processes tokens into an abstract syntax tree.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>_composer</code></td>
            

            <td class="type">
            
                
<span class="param-type">Composer</span>


            
            </td>

            

            

            <td class="description last">Maintains and appends an object database using instructions received from the parser.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line118">line 118</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".objectify"><span class="type-signature">(static) </span>objectify<span class="signature">(input)</span><span class="type-signature"> &rarr; {Object}</span></h4>
    

    



<div class="description">
    Converts the string output of stringify() back to a JSON (accounting for escaped backslashes).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Tridy JSON string output.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line517">line 517</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Thrown if the input isn't valid JSON.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">SyntaxError</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    Input string as a JSON object.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="clearCarry"><span class="type-signature"></span>clearCarry<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Clears the input buffer, thereby removing any incomplete statements that are being carried.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line340">line 340</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getAliases"><span class="type-signature"></span>getAliases<span class="signature">()</span><span class="type-signature"> &rarr; {Object}</span></h4>
    

    



<div class="description">
    Returns the database's set of aliases.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line149">line 149</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A data structure with each alias mapped to an internal constant.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getRandomSeeds"><span class="type-signature"></span>getRandomSeeds<span class="signature">()</span><span class="type-signature"> &rarr; {any}</span></h4>
    

    



<div class="description">
    Returns the database's current random seed.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line171">line 171</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The current random seed.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">any</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="isCarrying"><span class="type-signature"></span>isCarrying<span class="signature">()</span><span class="type-signature"> &rarr; {Boolean}</span></h4>
    

    



<div class="description">
    Returns true if this interpreter instance is carrying incomplete statements, false otherwise.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line330">line 330</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    True if carrying, false if not.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="query"><span class="type-signature">(async) </span>query<span class="signature">(input)</span><span class="type-signature"> &rarr; {Array.&lt;Object>}</span></h4>
    

    



<div class="description">
    Interprets a string containing one or more Tridy commands and outputs the results in a JSON object format.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>
|

<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Tridy command(s)/statement(s). A string is required unless opts.tokenless is true.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.tokenless</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">Used for internal control flow where it's better to send a pre-processed abstract syntax tree directly as input. Default is false.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.accept_carry</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">True to statefully retain tokens from incomplete statements, false to throw SyntaxError if receiving an incomplete statement. Default is false.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.interactive</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">Allows interactive control commands like @clear and @exit to be effective. Default is false.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.filepath</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Path of the file that is the source of the command(s)/statement(s). Used for debugging. Default is null.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.astree_only</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">Only return the abstract syntax tree; do not attempt to execute it and return the results thereof. Default is false.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.client_mode</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">True to run as a client, false to run standalone / as a server. Default is false.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.host</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Server to connect to (only applies if standalone is false). Default is localhost.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.port</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">Port to connect to (only applies if standalone is false). Default is 21780.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">Timeout period (in milliseconds) to wait for responses (only applies if standalone is false). Default is 3000.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line208">line 208</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>
<ul>
        <li>

<dl>
    <dt>
        <div class="param-desc">
        Thrown if the input isn't valid Tridy code.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">SyntaxError</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>

</li>
    
        <li>

<dl>
    <dt>
        <div class="param-desc">
        Thrown if the server host (optional) sends back an error response.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">ClientSideServerError</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    The output of the statement(s), including presentation metadata.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;Object></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setAliases"><span class="type-signature"></span>setAliases<span class="signature">(aliases)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sets (or resets) the aliases used by the database.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>aliases</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">A data structure with each alias mapped to an internal constant.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line160">line 160</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setRandomSeeds"><span class="type-signature"></span>setRandomSeeds<span class="signature">(seed)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sets (or resets) the random seed used by the database.
If the same seed as the current one is passed, then only the nonce is reset.
Passing null or undefined causes a new seed to be generated randomly.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>seed</code></td>
            

            <td class="type">
            
                
<span class="param-type">any</span>


            
            </td>

            

            

            <td class="description last">Random seed to use with @random or @shuffled.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line184">line 184</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="stringify"><span class="type-signature">(async) </span>stringify<span class="signature">(input)</span><span class="type-signature"> &rarr; {String|null}</span></h4>
    

    



<div class="description">
    Converts the JSON output of query() or objectify() to a string (accounting for escaped backslashes).
If there are exported files, this will also output them to the appropriate places.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Tridy query() JSON output (presumably).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.format</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Default format to export the JSON output in. Options are 'json', 'yaml', or 'xml'. Default is 'json'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.indent</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">Default indent increment size in spaces to output with. Default is null, which auto-generates 4 spaces except for YAML, where it is 2 spaces, and none for text output. Passing a non-positive number disables indentation as well as newlines in the output (except for YAML, where 1 space is a minimum).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.list_mode</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Default way to display output where there is one or multiple modules returned. By default, this is set to 'auto' where single modules are returned alone and multiple module are returned in an array, but there's also 'list_only' and 'items_only' modes.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.file</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Default file to export to. If null, then this is standard output / the console. Default is null.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.file_mode</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Default behavior when the file exported to already exists. Options are 'create' (where nothing is done), 'append', and 'replace'. Default is 'create'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.file_quiet</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">Default behavior on whether to throw an error when a file exported to already exists. Default is false (will throw an error).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opts.no_export</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">Whether to export file-directed output or not. Default is false.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Interpreter.js.html">Interpreter.js</a>, <a href="Interpreter.js.html#line361">line 361</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Thrown if some parameters are received incorrectly, either from the method caller or from the server, if there is one.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">SyntaxError</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    Input object as a formatted string, or null if it can't be converted to one.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>
|

<span class="param-type">null</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Interpreter.html">Interpreter</a></li></ul><h3>Classes</h3><ul><li><a href="module-Interpreter.Tridy.html">Tridy</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Thu Sep 22 2022 11:17:18 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>